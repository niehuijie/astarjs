var Pathfinding=function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);e.PathFinding=r.PathFinding,e.Heuristic=r.Heuristic},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l,r,h,o,f=n(2);(r=l=e.Types||(e.Types={}))[r.START=0]="START",r[r.END=1]="END",r[r.WALKABLE=2]="WALKABLE",r[r.NON_WALKABLE=3]="NON_WALKABLE",(o=h=e.Heuristic||(e.Heuristic={}))[o.MANHATTAN=0]="MANHATTAN",o[o.DIAGONAL=1]="DIAGONAL";var i=(u.prototype.setWalkable=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.walkableTypes=(t=this.walkableTypes).concat.apply(t,e),this},u.prototype.setStart=function(t){return this.start=t,this},u.prototype.setEnd=function(t){return this.end=t,this},u.prototype.gameMapToPathfind=function(t){var r=this,o="number"==typeof this.start,i="number"==typeof this.end;return t.map(function(t,n){return t.map(function(t,e){return o&&r.start==t||!o&&r.start.row==n&&r.start.col==e?l.START:i&&r.end==t||!i&&r.end.row==n&&r.end.col==e?l.END:-1<r.walkableTypes.indexOf(t)?l.WALKABLE:l.NON_WALKABLE})})},u.prototype.find=function(t){if(null==this.start||null==this.start)throw new Error("There is no start point. Please, use setStart() to configure the path's start point.");if(null==this.end||null==this.end)throw new Error("There is no end point. Please, use setEnd() to configure the path's end point.");var e=this.gameMapToPathfind(t),n="number"!=typeof this.start?new f.Node(this.start.row,this.start.col):this.findStartElement(e),r="number"!=typeof this.end?new f.Node(this.end.row,this.end.col):this.findEndElement(e);return this.findBestPath(n,r,e)},u.prototype.findStartElement=function(t){var e=this.findElement(t,l.START);if(null==e)throw new Error("Couldn't find a start point.");return e},u.prototype.findEndElement=function(t){var e=this.findElement(t,l.END);if(null==e)throw new Error("Couldn't find a end point.");return e},u.prototype.findElement=function(t,r){var o=null;return t.forEach(function(t,n){t.forEach(function(t,e){t==r&&(o=new f.Node(n,e))})}),o},u.prototype.findBestPath=function(t,e,n){var r=[],o=[],i=!1;for(r.push(t);!i;)0<(o=this.findValidAdjacents(n,r[r.length-1],r,o,e)).length&&r.push(o.pop()),i=this.isNodeEqual(r[r.length-1],e)||0==o.length;return 0<o.length?this.getPath(r[r.length-1]):[]},u.prototype.findValidAdjacents=function(t,n,r,o,e){var i=this,u=this.findAdjacents(t,n).filter(function(e){return!r.some(function(t){return i.isNodeEqual(t,e)})});return u.filter(function(e){return o.some(function(t){return i.isNodeEqual(t,e)})}).forEach(function(e){var t=o.filter(function(t){return i.isNodeEqual(t,e)})[0];n.getG()+i.getMoveValue(t,n)<t.getG()&&(t.setG(i.getMoveValue(t,n)),t.setParent(n))}),u.filter(function(e){return!o.some(function(t){return i.isNodeEqual(t,e)})}).forEach(function(t){t.setParent(n),t.setH(i.distanceBetweenNodes(t,e)),t.setG(i.getMoveValue(n,t)),o.push(t)}),o.sort(function(t,e){return e.getValue()-t.getValue()}),o},u.prototype.distanceBetweenNodes=function(t,e){var n=Math.abs(e.getCol()-t.getCol()),r=Math.abs(e.getRow()-t.getRow());return this.heuristic===h.MANHATTAN?this.DEFAULT_DISTANCE*(n+r):this.DEFAULT_DISTANCE*(n+r)+(this.DIAGONAL_DISTANCE-2*this.DEFAULT_DISTANCE)*Math.min(n,r)},u.prototype.getMoveValue=function(t,e){return t.getRow()!=e.getRow()&&t.getCol()!=e.getCol()?this.DIAGONAL_DISTANCE:this.DEFAULT_DISTANCE},u.prototype.findAdjacents=function(t,e){for(var n,r=[],o=[[-1,-1],[-1,1],[1,-1],[1,1]],i=[[-1,0],[0,-1],[0,1],[1,0]],u=t,s=0,a=0;a<i.length;a++)n=e.getRow()+i[a][0],s=e.getCol()+i[a][1],-1<n&&-1<s&&n<u.length&&s<u[n].length&&(u[n][s]==l.WALKABLE||u[n][s]==l.END)&&r.push(new f.Node(n,s));if(this.heuristic===h.DIAGONAL)for(a=0;a<o.length;a++)n=e.getRow()+o[a][0],s=e.getCol()+o[a][1],-1<n&&-1<s&&n<u.length&&s<u[n].length&&(u[n][s]==l.WALKABLE||u[n][s]==l.END)&&(this.allowDiagonal?r.push(new f.Node(n,s)):(-1==o[a][0]&&-1==o[a][1]&&u[n+1][s]==l.WALKABLE&&u[n][s+1]==l.WALKABLE||-1==o[a][0]&&1==o[a][1]&&u[n][s-1]==l.WALKABLE&&u[n+1][s]==l.WALKABLE||1==o[a][0]&&-1==o[a][1]&&u[n-1][s]==l.WALKABLE&&u[n][s+1]==l.WALKABLE||1==o[a][0]&&1==o[a][1]&&u[n][s-1]==l.WALKABLE&&u[n-1][s]==l.WALKABLE)&&r.push(new f.Node(n,s)));return r},u.prototype.getPath=function(t){for(var e=t,n=[];e;)n.push(this.nodeToObject(e)),e=e.getParent();return n.reverse()},u.prototype.nodeToObject=function(t){return{col:t.getCol(),row:t.getRow()}},u.prototype.isNodeEqual=function(t,e){return t.getRow()==e.getRow()&&t.getCol()==e.getCol()},u);function u(t){this.DEFAULT_DISTANCE=10,this.DIAGONAL_DISTANCE=14,this.heuristic=h.MANHATTAN,this.allowDiagonal=!1,this.walkableTypes=[],t&&t.heuristic&&(this.heuristic=t.heuristic,this.allowDiagonal=t.allowDiagonal||!1)}e.PathFinding=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(o.prototype.getRow=function(){return this.row},o.prototype.getCol=function(){return this.col},o.prototype.setH=function(t){this.h=t},o.prototype.getH=function(){return this.h},o.prototype.setG=function(t){this.g=t},o.prototype.getG=function(){return this.g+(this.parent?this.parent.getG():0)},o.prototype.getValue=function(){return this.getH()+this.getG()},o.prototype.setParent=function(t){this.parent=t},o.prototype.getParent=function(){return this.parent},o);function o(t,e){this.row=t,this.col=e,this.h=0,this.g=0,this.parent=null}e.Node=r}]);