var Pathfinding=function(n){var r={};function o(t){if(r[t])return r[t].exports;var e=r[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,o),e.l=!0,e.exports}return o.m=n,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(1);e.PathFinding=r.PathFinding,e.Heuristic=r.Heuristic},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var f,r,p,o,c=n(2);(r=f=e.Types||(e.Types={}))[r.START=0]="START",r[r.END=1]="END",r[r.WALKABLE=2]="WALKABLE",r[r.NON_WALKABLE=3]="NON_WALKABLE",(o=p=e.Heuristic||(e.Heuristic={}))[o.MANHATTAN=0]="MANHATTAN",o[o.DIAGONAL=1]="DIAGONAL";var i=(s.prototype.setWalkable=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.walkableTypes=(t=this.walkableTypes).concat.apply(t,e),this},s.prototype.setStart=function(t){return this.start=t,this},s.prototype.setEnd=function(t){return this.end=t,this},s.prototype.gameMapToPathfind=function(t){var r=this,o="number"==typeof this.start,i="number"==typeof this.end;return t.map(function(t,n){return t.map(function(t,e){return o&&r.start==t||!o&&r.start.row==n&&r.start.col==e?f.START:i&&r.end==t||!i&&r.end.row==n&&r.end.col==e?f.END:-1<r.walkableTypes.indexOf(t)?f.WALKABLE:f.NON_WALKABLE})})},s.prototype.find=function(t){if(null==this.start||null==this.start)throw new Error("There is no start point. Please, use setStart() to configure the path's start point.");if(null==this.end||null==this.end)throw new Error("There is no end point. Please, use setEnd() to configure the path's end point.");var e=this.gameMapToPathfind(t),n="number"!=typeof this.start?new c.Node(this.start.row,this.start.col):this.findStartElement(e),r="number"!=typeof this.end?new c.Node(this.end.row,this.end.col):this.findEndElement(e);return this.findBestPath(n,r,e)},s.prototype.findStartElement=function(t){var e=this.findElement(t,f.START);if(null==e)throw new Error("Couldn't find a start point.");return e},s.prototype.findEndElement=function(t){var e=this.findElement(t,f.END);if(null==e)throw new Error("Couldn't find a end point.");return e},s.prototype.findElement=function(t,r){var o=null;return t.forEach(function(t,n){t.forEach(function(t,e){t==r&&(o=new c.Node(n,e))})}),o},s.prototype.findBestPath=function(t,e,n){var r,o=this,i=[],s=[],u=!1,a=t;for(i.push(t);!u;)this.updateLists(n,a,i,s,e),0<s.length&&i.push(s.pop()),a=i[i.length-1],r=this.findAdjacents(n,a).filter(function(t){return o.elementNotExistsInside(s,t)&&o.elementNotExistsInside(i,t)}),u=this.isNodeEqual(i[i.length-1],e)||0==s.length&&!r.length;return 0<s.length?this.getPath(i[i.length-1]):[]},s.prototype.updateLists=function(t,n,e,r,o){var i=this,s=this.findAdjacents(t,n).filter(function(t){return i.elementNotExistsInside(e,t)});s.filter(function(t){return i.elementExistsInside(r,t)}).forEach(function(e){var t=r.filter(function(t){return i.isNodeEqual(t,e)})[0];n.getG()+i.getMoveValue(t,n)<t.getG()&&(t.setG(i.getMoveValue(t,n)),t.setParent(n))}),s.filter(function(t){return i.elementNotExistsInside(r,t)}).forEach(function(t){t.setParent(n),t.setH(i.distanceBetweenNodes(t,o)),t.setG(i.getMoveValue(n,t)),r.push(t)}),r.sort(function(t,e){return e.getValue()-t.getValue()})},s.prototype.elementNotExistsInside=function(t,e){return!this.elementExistsInside(t,e)},s.prototype.elementExistsInside=function(t,e){var n=this;return t.some(function(t){return n.isNodeEqual(t,e)})},s.prototype.distanceBetweenNodes=function(t,e){var n=Math.abs(e.getCol()-t.getCol()),r=Math.abs(e.getRow()-t.getRow());return this.heuristic===p.MANHATTAN?this.DEFAULT_DISTANCE*(n+r):this.DEFAULT_DISTANCE*(n+r)+(this.DIAGONAL_DISTANCE-2*this.DEFAULT_DISTANCE)*Math.min(n,r)},s.prototype.getMoveValue=function(t,e){return t.getRow()!=e.getRow()&&t.getCol()!=e.getCol()?this.DIAGONAL_DISTANCE:this.DEFAULT_DISTANCE},s.prototype.findAdjacents=function(t,e){for(var n,r=[],o=[[-1,-1],[-1,1],[1,-1],[1,1]],i=[[-1,0],[0,-1],[0,1],[1,0]],s=t,u=0,a=0;a<i.length;a++)n=e.getRow()+i[a][0],u=e.getCol()+i[a][1],-1<n&&-1<u&&n<s.length&&u<s[n].length&&(s[n][u]==f.WALKABLE||s[n][u]==f.END)&&r.push(new c.Node(n,u));var l=!1;if(this.heuristic===p.DIAGONAL)for(a=0;a<o.length;a++)if(n=e.getRow()+o[a][0],u=e.getCol()+o[a][1],-1<n&&-1<u&&n<s.length&&u<s[n].length&&(s[n][u]==f.WALKABLE||s[n][u]==f.END))if(this.allowDiagonal)r.push(new c.Node(n,u));else{l=!1;for(var h=0;h<o.length;h++)h==a&&s[n-o[a][0]][u]==f.WALKABLE&&s[n][u-o[a][1]]==f.WALKABLE&&(l=!0);l&&r.push(new c.Node(n,u))}return r},s.prototype.getPath=function(t){for(var e=t,n=[];e;)n.push(this.nodeToObject(e)),e=e.getParent();return n.reverse()},s.prototype.nodeToObject=function(t){return{col:t.getCol(),row:t.getRow()}},s.prototype.isNodeEqual=function(t,e){return t.getRow()==e.getRow()&&t.getCol()==e.getCol()},s);function s(t){this.DEFAULT_DISTANCE=10,this.DIAGONAL_DISTANCE=14,this.heuristic=p.MANHATTAN,this.allowDiagonal=!1,this.walkableTypes=[],t&&t.heuristic&&(this.heuristic=t.heuristic,this.allowDiagonal=t.allowDiagonal||!1)}e.PathFinding=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(o.prototype.getRow=function(){return this.row},o.prototype.getCol=function(){return this.col},o.prototype.setH=function(t){this.h=t},o.prototype.getH=function(){return this.h},o.prototype.setG=function(t){this.g=t},o.prototype.getG=function(){return this.g+(this.parent?this.parent.getG():0)},o.prototype.getValue=function(){return this.getH()+this.getG()},o.prototype.setParent=function(t){this.parent=t},o.prototype.getParent=function(){return this.parent},o);function o(t,e){this.row=t,this.col=e,this.h=0,this.g=0,this.parent=null}e.Node=r}]);