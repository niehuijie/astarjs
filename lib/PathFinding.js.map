{"version":3,"file":"PathFinding.js","sourceRoot":"","sources":["../src/PathFinding.ts"],"names":[],"mappings":"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","sourcesContent":["import { Node } from \"./Node\";\r\n\r\nexport enum Types {\r\n    START,\r\n    END,\r\n    WALKABLE,\r\n    NON_WALKABLE\r\n}\r\n\r\nexport enum Heuristic {\r\n\tMANHATTAN,\r\n\tDIAGONAL\r\n}\r\n\r\nexport class PathFinding {\r\n\r\n\tprivate DEFAULT_DISTANCE:number = 10;\r\n\tprivate DIAGONAL_DISTANCE:number = 14;\r\n\r\n\tprivate heuristic:Heuristic = Heuristic.MANHATTAN;\r\n\tprivate allowDiagonal:boolean = false;\r\n\tprivate walkableTypes:number[] = [];\r\n\tprivate start:number|{row:number, col:number};\r\n\tprivate end:number|{row:number, col:number};\r\n\r\n    constructor(options?:{heuristic:Heuristic, allowDiagonal?:boolean}){\r\n\t\tif(options && options.heuristic){\r\n\t\t\tthis.heuristic = options.heuristic;\r\n\t\t\tthis.allowDiagonal = options.allowDiagonal || false;\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic setWalkable(...args:number[]){\r\n\t\tthis.walkableTypes = this.walkableTypes.concat(...args);\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic setStart(start:number|{row:number, col:number}){\r\n\t\tthis.start = start;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tpublic setEnd(end:number|{row:number, col:number}){\r\n\t\tthis.end = end;\r\n\t\treturn this;\r\n\t}\r\n\r\n\tprivate gameMapToPathfind(map: number[][]): number[][] {\r\n\t\tconst isStartObject:boolean = typeof this.start === \"number\";\r\n\t\tconst isEndObject:boolean = typeof this.end === \"number\";\r\n        return map.map((row, rowIndex)=>{\r\n            return row.map((id, colIndex) => {\r\n\t\t\t\tif(isStartObject && this.start == id ||\r\n\t\t\t\t\t!isStartObject && (this.start as {row:number, col:number}).row == rowIndex && \r\n\t\t\t\t\t(this.start as {row:number, col:number}).col == colIndex){\r\n\t\t\t\t\treturn Types.START;\r\n\t\t\t\t} else if(isEndObject && this.end == id ||\r\n\t\t\t\t\t!isEndObject && (this.end as {row:number, col:number}).row == rowIndex && \r\n\t\t\t\t\t(this.end as {row:number, col:number}).col == colIndex){\r\n\t\t\t\t\treturn Types.END;\r\n\t\t\t\t} else if(this.walkableTypes.indexOf(id) > -1){\r\n                      return Types.WALKABLE;\r\n                } else {\r\n                      return Types.NON_WALKABLE;\r\n                }\r\n             });\r\n        });\r\n    }\r\n\r\n    public find(map: number[][]): {col:number,row:number}[]{\r\n\t\tif(this.start == undefined || this.start == null){\r\n\t\t\tthrow new Error('There is no start point. Please, use setStart() to configure the path\\'s start point.');\r\n\t\t}\r\n\r\n\t\tif(this.end == undefined || this.end == null){\r\n\t\t\tthrow new Error('There is no end point. Please, use setEnd() to configure the path\\'s end point.');\r\n\t\t}\r\n\r\n\t\tlet finalMap:number[][] = this.gameMapToPathfind(map);\r\n\t\tlet firstElement = (typeof this.start !== \"number\") ? new Node(this.start.row, this.start.col) : this.findStartElement(finalMap);\r\n\t\tlet lastElement = (typeof this.end !== \"number\") ? new Node(this.end.row, this.end.col) : this.findEndElement(finalMap);\r\n        return this.findBestPath(firstElement, lastElement, finalMap);\r\n    }\r\n\r\n\tprivate findStartElement(map:number[][]): Node {\r\n    \tlet startPoint:Node = this.findElement(map, Types.START) as Node;\r\n    \tif(startPoint == null){\r\n    \t\tthrow new Error('Couldn\\'t find a start point.');\r\n\t\t}\r\n\t\treturn startPoint;\r\n\t}\r\n\r\n\tprivate findEndElement(map:number[][]): Node {\r\n\t\tlet endPoint:Node = this.findElement(map, Types.END) as Node;\r\n\t\tif(endPoint == null){\r\n\t\t\tthrow new Error('Couldn\\'t find a end point.');\r\n\t\t}\r\n\t\treturn endPoint;\r\n\t}\r\n\r\n\tprivate findElement(map:number[][], value:number): Node | null {\r\n\t\tlet el = null;\r\n\t\tmap.forEach((element, indexRow) => {\r\n\t\t\telement.forEach((element, indexCol) => {\r\n\t\t\t\tif(element == value){\r\n\t\t\t\t\tel = new Node(indexRow, indexCol);\r\n\t\t\t\t} \r\n\t\t\t});\r\n\t\t});\r\n\t\treturn el;\r\n\t}\r\n\r\n    private findBestPath(firstElement: Node, lastElement:Node, map: number[][]): {col:number,row:number}[]{\r\n\r\n\t\tlet closedList: Node[] = [];\r\n\t\tlet openList: Node[]= [];\r\n\t\tlet isFinished: boolean = false;\r\n\r\n        closedList.push(firstElement);\r\n\r\n        while(!isFinished){\r\n            openList = this.findValidAdjacents(map, closedList[closedList.length -1], closedList, openList, lastElement);\r\n\t\t\tif(openList.length > 0)closedList.push(openList.pop() as Node);\r\n            isFinished = this.isNodeEqual(closedList[closedList.length-1],lastElement) || openList.length == 0;\r\n        }\r\n\r\n        return (openList.length > 0) ? this.getPath(closedList[closedList.length-1]) : [];\r\n    }\r\n\r\n\tprivate findValidAdjacents(map:number[][], currentNode:Node, closedList:Node[], openList: Node[], lastElement:Node){\r\n\r\n    \t//get all adjacents position possibilities that we don't have in the closed list\r\n\t\tlet validAdjacents = this.findAdjacents(map, currentNode).filter(\r\n\t\t\t(elementAdjacent:Node) => {\r\n\t\t\t\treturn !closedList.some((element:Node) => {\r\n\t\t\t\t\treturn this.isNodeEqual(element, elementAdjacent)\r\n\t\t\t\t})\r\n\t\t\t});\r\n\r\n\t\t//get all adjacents position possibilities that we have in the open list and don't have inside the closed list\r\n\t\tlet validAdjacentsOpenList = validAdjacents.filter(\r\n\t\t\t(elementAdjacent:Node) => {\r\n\t\t\t\treturn openList.some((element:Node) => {\r\n\t\t\t\t\treturn this.isNodeEqual(element, elementAdjacent)\r\n\t\t\t\t})\r\n\t\t\t});\r\n\r\n\t\t//update distance values if the new potencial Node position on the path is longer than the current one\r\n\t\tvalidAdjacentsOpenList.forEach((elementAdjacent:Node) => {\r\n\t\t\tlet validElement = openList.filter((element:Node) => this.isNodeEqual(element, elementAdjacent))[0];\r\n\t\t\tif( currentNode.getG() + this.getMoveValue(validElement, currentNode) < validElement.getG()){\r\n\t\t\t\tvalidElement.setG(this.getMoveValue(validElement, currentNode));\r\n\t\t\t\tvalidElement.setParent(currentNode);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t//get all adjacents posiiton possibilities that we don't have in the open list and don't have inside the closed list\r\n\t\tlet validAdjacentsNewOpenList = validAdjacents.filter(\r\n\t\t\t(elementAdjacent:Node) => {\r\n\t\t\t\treturn !openList.some((element:Node) => {\r\n\t\t\t\t\treturn this.isNodeEqual(element, elementAdjacent)\r\n\t\t\t\t})\r\n\t\t\t});\r\n\r\n\t\t//update distance values for the potencial new positions in the open list\r\n\t\tvalidAdjacentsNewOpenList.forEach((element) => {\r\n\t\t\telement.setParent(currentNode);\r\n\t\t\telement.setH(this.distanceBetweenNodes(element, lastElement));\r\n\t\t\telement.setG(this.getMoveValue(currentNode, element));\r\n\t\t\topenList.push(element);\r\n\t\t});\r\n\r\n\t\topenList.sort((a,b) => b.getValue() - a.getValue());\r\n\r\n\t\treturn openList;\r\n\t}\r\n\r\n\tprivate distanceBetweenNodes(initialNode:Node, finalNode:Node){\r\n\t\tlet col = Math.abs(finalNode.getCol() - initialNode.getCol());\r\n\t\tlet row = Math.abs(finalNode.getRow() - initialNode.getRow());\r\n\r\n\t\tif(this.heuristic === Heuristic.MANHATTAN){\r\n\t\t\treturn this.DEFAULT_DISTANCE*(col + row);\r\n\t\t} else {\r\n\t\t\treturn this.DEFAULT_DISTANCE*(col + row) + (this.DIAGONAL_DISTANCE -2*this.DEFAULT_DISTANCE)*Math.min(col,row);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate getMoveValue(node:Node, newNode:Node){\r\n\t\tif(node.getRow() != newNode.getRow() && node.getCol() != newNode.getCol()) return this.DIAGONAL_DISTANCE;\r\n\t\telse return this.DEFAULT_DISTANCE;\r\n\t}\r\n\r\n\tprivate findAdjacents(map:number[][], node:Node) : Node[] {\r\n\r\n\t\tlet adjacents: Node[] = [];\r\n\t\tlet diagonal = [[-1,-1], [-1,1], [1,-1], [1,1]];\r\n\t\tlet manhattan = [[-1,0], [0,-1], [0,1], [1,0]];\r\n\r\n\t\tlet mapElements = map;\r\n\t\tlet x, y = 0;\r\n\r\n\t\tfor(let v = 0; v < manhattan.length; v++){\r\n\t\t\tx = node.getRow() + manhattan[v][0];\r\n\t\t\ty = node.getCol() + manhattan[v][1];\r\n\r\n\t\t\tif(x > -1 && y > -1 && x < mapElements.length && y < mapElements[x].length\r\n\t\t\t\t&& (mapElements[x][y] == Types.WALKABLE || mapElements[x][y] == Types.END )){\r\n\t\t\t\tadjacents.push(new Node(x, y));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif(this.heuristic === Heuristic.DIAGONAL){\r\n\t\t\tfor(let v = 0; v < diagonal.length; v++){\r\n\t\t\t\tx = node.getRow() + diagonal[v][0];\r\n\t\t\t\ty = node.getCol() + diagonal[v][1];\r\n\t\r\n\t\t\t\tif(x > -1 && y > -1 && x < mapElements.length && y < mapElements[x].length\r\n\t\t\t\t\t&& (mapElements[x][y] == Types.WALKABLE || mapElements[x][y] == Types.END )){\r\n\t\t\t\t\tif(!this.allowDiagonal){\r\n\t\t\t\t\t\tif(diagonal[v][0] == -1 && diagonal[v][1] == -1 && mapElements[x+1][y] == Types.WALKABLE && mapElements[x][y+1] == Types.WALKABLE\r\n\t\t\t\t\t\t|| diagonal[v][0] == -1 && diagonal[v][1] == 1 && mapElements[x][y-1] == Types.WALKABLE && mapElements[x+1][y] == Types.WALKABLE\r\n\t\t\t\t\t\t|| diagonal[v][0] == 1 && diagonal[v][1] == -1 && mapElements[x-1][y] == Types.WALKABLE && mapElements[x][y+1] == Types.WALKABLE\r\n\t\t\t\t\t\t|| diagonal[v][0] == 1 && diagonal[v][1] == 1 && mapElements[x][y-1] == Types.WALKABLE && mapElements[x-1][y] == Types.WALKABLE){\r\n\t\t\t\t\t\t\tadjacents.push(new Node(x, y));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else { \r\n\t\t\t\t\t\tadjacents.push(new Node(x, y));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn adjacents;\r\n\t}\r\n\r\n\tprivate getPath(node:Node):{col:number,row:number}[] {\r\n        let currentNode = node;\r\n        let listPath = [];\r\n        while(currentNode){\r\n            listPath.push(this.nodeToObject(currentNode));\r\n            currentNode = currentNode.getParent();\r\n        }\r\n        return listPath.reverse();\r\n    }\r\n\r\n\tprivate nodeToObject(node:Node){\r\n\t\treturn {col: node.getCol(), row: node.getRow()};\r\n\t}\r\n\r\n\tprivate isNodeEqual(element:Node, element0:Node):boolean{\r\n        return (element.getRow() == element0.getRow() && element.getCol() == element0.getCol());\r\n\t}\r\n\r\n}"]}